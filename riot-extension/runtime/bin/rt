#!/bin/sh
set -e

SCRIPT_DIR="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"
PYTHON_BIN="$SCRIPT_DIR/../python/bin/python"
LIBEXEC_DIR="$SCRIPT_DIR/../libexec"

if [ ! -x "$PYTHON_BIN" ]; then
  for candidate in "$SCRIPT_DIR/../python"/*/bin/python; do
    if [ -x "$candidate" ]; then
      PYTHON_BIN="$candidate"
      break
    fi
  done
fi

if [ ! -x "$PYTHON_BIN" ]; then
  exit 1
fi

export PATH="$LIBEXEC_DIR:$SCRIPT_DIR:$PATH"
exec "$PYTHON_BIN" -m riot "$@"
